<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwissPark - Places de Parking en Suisse</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4ade80; --dark: #0a0a0a; --gray: #1a1a1a; --text: #ffffff; --text-muted: #9ca3af; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--dark); color: var(--text); line-height: 1.6; overflow-x: hidden; }
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .logo { display: flex; align-items: center; gap: 0.5rem; font-size: 1.5rem; font-weight: 700; color: var(--primary); text-decoration: none; }
        .nav-actions { display: flex; gap: 1rem; align-items: center; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s; border: none; text-decoration: none; display: inline-block; }
        .btn-primary { background: var(--primary); color: var(--dark); }
        .btn-outline { background: transparent; color: var(--text); border: 2px solid var(--primary); }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }
        
        .hero { padding: 4rem 2rem; text-align: center; max-width: 1200px; margin: 0 auto; }
        .hero h1 { font-size: 3.5rem; margin-bottom: 1rem; background: linear-gradient(to right, #fff, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { font-size: 1.25rem; color: var(--text-muted); margin-bottom: 2rem; }
        
        #map { height: 500px; border-radius: 16px; margin: 2rem; border: 1px solid rgba(255, 255, 255, 0.1); }
        
        /* Modals */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-content { background: var(--gray); padding: 2.5rem; border-radius: 24px; width: 90%; max-width: 450px; border: 1px solid rgba(255,255,255,0.1); position: relative; }
        .modal-close { position: absolute; top: 1.5rem; right: 1.5rem; cursor: pointer; font-size: 1.5rem; color: var(--text-muted); }
        .modal h2 { margin-bottom: 1.5rem; color: var(--primary); }
        
        form { display: flex; flex-direction: column; gap: 1.25rem; }
        .form-group { display: flex; flex-direction: column; gap: 0.5rem; text-align: left; }
        label { font-size: 0.9rem; color: var(--text-muted); }
        input, select, textarea { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 0.8rem; border-radius: 10px; color: white; font-size: 1rem; width: 100%; }
        input:focus { border-color: var(--primary); outline: none; }
        
        .success-msg { color: var(--primary); font-weight: bold; text-align: center; display: none; padding: 1rem; border: 1px solid var(--primary); border-radius: 10px; margin-top: 1rem; }

        @media (max-width: 768px) { .hero h1 { font-size: 2.2rem; } .navbar { padding: 1rem; } .nav-actions .btn { padding: 0.5rem 1rem; font-size: 0.8rem; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="#" class="logo">üÖøÔ∏è SwissPark</a>
        <div class="nav-actions">
            <button class="btn btn-outline" onclick="openModal('loginModal')">Connexion</button>
            <button class="btn btn-primary" onclick="openModal('addParkingModal')">Ajouter une place</button>
        </div>
    </nav>

    <section class="hero">
        <h1>Parking intelligent en Suisse</h1>
        <p>Rejoignez SwissPark. Connectez-vous avec votre e-mail <b>ou</b> t√©l√©phone.</p>
        <div id="userWelcome" style="display:none; color: var(--primary); margin-bottom: 2rem; font-weight: 600;"></div>
    </section>

    <div id="map"></div>

    <!-- Modal Connexion -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Connexion</h2>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>E-mail ou Num√©ro de t√©l√©phone</label>
                    <input type="text" id="loginIdentifier" placeholder="votre@email.com ou +41..." required>
                </div>
                <button type="submit" class="btn btn-primary">Se connecter</button>
            </form>
            <div id="loginSuccess" class="success-msg">Connexion r√©ussie !</div>
        </div>
    </div>

    <!-- Modal Ajouter une place -->
    <div id="addParkingModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('addParkingModal')">&times;</span>
            <h2>Proposer ma place</h2>
            <form id="addParkingForm" onsubmit="handleAddParking(event)">
                <div class="form-group">
                    <label>Adresse exacte</label>
                    <input type="text" placeholder="Rue du Tunnel 1, Lausanne" required>
                </div>
                <div class="form-group">
                    <label>Prix par jour (CHF)</label>
                    <input type="number" value="5" min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">Publier la place</button>
            </form>
            <div id="parkSuccess" class="success-msg">Place ajout√©e avec succ√®s !</div>
        </div>
    </div>

    <!-- Modal R√©servation -->
    <div id="reserveModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('reserveModal')">&times;</span>
            <h2 id="reserveTitle">R√©server une place</h2>
            <p id="reserveInfo" style="margin-bottom: 1rem; color: var(--text-muted);"></p>
            <form onsubmit="handleReservation(event)">
                <div class="form-group">
                    <label>Date de r√©servation</label>
                    <input type="date" required>
                </div>
                <button type="button" class="btn btn-outline" style="width: 100%; border-color: #00D5FF; color: #00D5FF;">Payer avec TWINT üá®üá≠</button>
                <button type="submit" class="btn btn-primary">Confirmer la r√©servation</button>
            </form>
            <div id="reserveSuccess" class="success-msg">R√©servation confirm√©e !</div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([46.8182, 8.2275], 8);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OpenStreetMap' }).addTo(map);

        const parkingIcon = L.divIcon({
            html: '<div style="background: #4ade80; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">üÖøÔ∏è</div>',
            className: 'custom-icon', iconSize: [30, 30], iconAnchor: [15, 15]
        });

        const parkingSpots = [
            { coords: [46.2044, 6.1432], name: "Gen√®ve Centre", price: 5 },
            { coords: [46.5197, 6.6323], name: "Lausanne Gare", price: 4 },
            { coords: [47.3769, 8.5417], name: "Z√ºrich HB", price: 6 },
            { coords: [46.9480, 7.4474], name: "Berne Centre", price: 4 }
        ];

        parkingSpots.forEach(spot => {
            L.marker(spot.coords, { icon: parkingIcon }).addTo(map)
            .on('click', () => {
                document.getElementById('reserveTitle').innerText = "R√©server: " + spot.name;
                document.getElementById('reserveInfo').innerText = "Prix: " + spot.price + " CHF/jour";
                openModal('reserveModal');
            });
        });

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        function handleLogin(e) {
            e.preventDefault();
            const identifier = document.getElementById('loginIdentifier').value;
            if(!identifier) return;
            document.getElementById('loginSuccess').style.display = 'block';
            setTimeout(() => {
                closeModal('loginModal');
                document.getElementById('userWelcome').innerText = "Bienvenue, " + identifier;
                document.getElementById('userWelcome').style.display = 'block';
            }, 1500);
        }

        function handleAddParking(e) { e.preventDefault(); document.getElementById('parkSuccess').style.display = 'block'; setTimeout(() => closeModal('addParkingModal'), 1500); }
        function handleReservation(e) { e.preventDefault(); document.getElementById('reserveSuccess').style.display = 'block'; setTimeout(() => closeModal('reserveModal'), 1500); }
    </script>
</body>
</html>
